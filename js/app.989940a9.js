(function(e){function t(t){for(var r,a,i=t[0],u=t[1],d=t[2],p=0,l=[];p<i.length;p++)a=i[p],Object.prototype.hasOwnProperty.call(c,a)&&c[a]&&l.push(c[a][0]),c[a]=0;for(r in u)Object.prototype.hasOwnProperty.call(u,r)&&(e[r]=u[r]);s&&s(t);while(l.length)l.shift()();return o.push.apply(o,d||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],r=!0,i=1;i<n.length;i++){var u=n[i];0!==c[u]&&(r=!1)}r&&(o.splice(t--,1),e=a(a.s=n[0]))}return e}var r={},c={app:0},o=[];function a(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=e,a.c=r,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)a.d(n,r,function(t){return e[t]}.bind(null,r));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="/vue-mediapipe/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],u=i.push.bind(i);i.push=t,i=i.slice();for(var d=0;d<i.length;d++)t(i[d]);var s=u;o.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("cd49")},"3ec9":function(e,t,n){"use strict";n("c6ca")},"432f":function(e,t,n){e.exports=n.p+"media/background_1.70938e65.mp4"},"6aed":function(e,t,n){e.exports=n.p+"media/background_4.4211bd53.mp4"},"6ed3":function(e,t,n){var r={"./background_1.mp4":"432f","./background_2.mp4":"dc0f","./background_3.mp4":"7e03","./background_4.mp4":"6aed","./background_5.mp4":"7e9a","./background_6.mp4":"d637","./background_7.mp4":"82d6"};function c(e){var t=o(e);return n(t)}function o(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}c.keys=function(){return Object.keys(r)},c.resolve=o,e.exports=c,c.id="6ed3"},"7e03":function(e,t,n){e.exports=n.p+"media/background_3.e63b82ee.mp4"},"7e9a":function(e,t,n){e.exports=n.p+"media/background_5.eb7452a5.mp4"},"82d6":function(e,t,n){e.exports=n.p+"media/background_7.ead644c8.mp4"},c6ca:function(e,t,n){},cd49:function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("7a23"),c={ref:"canvas"},o={id:"backgrounds"},a=Object(r["d"])("label",{class:"file-input",for:"file"},[Object(r["d"])("figure",null,[Object(r["d"])("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"17",viewBox:"0 0 20 17"},[Object(r["d"])("path",{d:"M10 0l-5.2 4.9h3.3v5.1h3.8v-5.1h3.3l-5.2-4.9zm9.3 11.5l-3.2-2.1h-2l3.4 2.6h-3.5c-.1 0-.2.1-.2.1l-.8 2.3h-6l-.8-2.2c-.1-.1-.1-.2-.2-.2h-3.6l3.4-2.6h-2l-3.2 2.1c-.4.3-.7 1-.6 1.5l.6 3.1c.1.5.7.9 1.2.9h16.3c.6 0 1.1-.4 1.3-.9l.6-3.1c.1-.5-.2-1.2-.7-1.5z"})])])],-1),i=Object(r["d"])("br",null,null,-1),u=["src","onClick"];function d(e,t,n,d,s,p){return Object(r["e"])(),Object(r["c"])(r["a"],null,[Object(r["d"])("canvas",c,null,512),Object(r["d"])("div",o,[Object(r["d"])("div",{id:"clear",onClick:t[0]||(t[0]=function(t){return e.background.removeAttribute("src")})},"X"),Object(r["d"])("input",{id:"file",type:"file",accept:"video/mp4,video/x-m4v,video/*",style:{display:"none"},onChange:t[1]||(t[1]=function(){return e.onUploadBackground&&e.onUploadBackground.apply(e,arguments)})},null,32),a,i,(Object(r["e"])(!0),Object(r["c"])(r["a"],null,Object(r["h"])(e.backgrounds,(function(t,n){return Object(r["e"])(),Object(r["c"])("video",{key:n,src:t,onClick:function(n){return e.background.src=t}},null,8,u)})),128))])],64)}var s=n("1da1"),p=n("d4ec"),l=n("bee2"),f=n("262e"),b=n("2caf"),h=(n("96cf"),n("a630"),n("3ca3"),n("d3b7"),n("ddb0"),n("2b3d"),n("9861"),n("9ab4")),g=n("ce1f"),v=n("141c"),m=n("ce85"),O=function(e){Object(f["a"])(n,e);var t=Object(b["a"])(n);function n(e,r,c){var o,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.getContext("2d");return Object(p["a"])(this,n),o=t.call(this,r,{onFrame:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,o.pipe.send({image:r});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}()}),o.canvas=e,o.source=r,o.background=c,o.ctx=a,o.pipe=new m["SelfieSegmentation"]({locateFile:function(e){return"https://cdn.jsdelivr.net/npm/@mediapipe/selfie_segmentation/".concat(e)}}),r.addEventListener("loadedmetadata",(function(){o.canvas.height=r.videoHeight,o.canvas.width=r.videoWidth})),o}return Object(l["a"])(n,[{key:"setOptions",value:function(e){var t=this;return this.pipe.onResults((function(e){return t.render(e)})),this.pipe.setOptions(e),this.start()}},{key:"render",value:function(e){var t=e.segmentationMask,n=e.image,r=this.canvas,c=r.width,o=r.height;if(this.ctx.clearRect(0,0,c,o),this.background.src){t&&this.ctx.drawImage(t,0,0,c,o);var a=this.canvas.height/this.background.videoHeight*this.background.videoWidth;this.ctx.globalCompositeOperation="source-out",this.ctx.drawImage(this.background,-(a-c)/2,0,a,o)}this.ctx.globalCompositeOperation="destination-atop",this.ctx.drawImage(n,0,0,c,o)}}]),n}(v["Camera"]),k=function(e){Object(f["a"])(r,e);var t=Object(b["a"])(r);function r(){var e;return Object(p["a"])(this,r),e=t.apply(this,arguments),e.background=document.createElement("video"),e.source=document.createElement("video"),e.backgrounds=Array.from(new Array(7),(function(e,t){return n("6ed3")("./background_".concat(t+1,".mp4"))})),e}return Object(l["a"])(r,[{key:"onUploadBackground",value:function(e){this.background.src=URL.createObjectURL(e.target.files[0])}},{key:"mounted",value:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.background.crossOrigin="Anonymous",this.background.autoplay=!0,this.background.loop=!0,e.next=5,new O(this.$refs.canvas,this.source,this.background).setOptions({selfieMode:!0,modelSelection:1});case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}]),r}(g["b"]);k=Object(h["a"])([Object(g["a"])({})],k);var j=k,y=(n("3ec9"),n("d959")),w=n.n(y);const x=w()(j,[["render",d]]);var _=x;Object(r["b"])(_).mount("#app")},d637:function(e,t,n){e.exports=n.p+"media/background_6.da95ffdd.mp4"},dc0f:function(e,t,n){e.exports=n.p+"media/background_2.8a63b766.mp4"}});
//# sourceMappingURL=app.989940a9.js.map